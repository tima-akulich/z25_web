{% load basket %}

<form method="post" action="{% url 'basket-edit' %}">
    {% csrf_token %}
    <input type="hidden" name="product_id" value="{{ product_id }}">
    {% if user_product_ids|product_exists:product_id %}
        <button>Remove</button>
    {% else %}
        <button>Add</button>
    {% endif %}
</form>